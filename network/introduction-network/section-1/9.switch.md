# 9. 스위치

- 스위치는 브리치와 기능적인 차이는 없음 단지 성능이 더 좋음
- 스위치는 스위칭 허브라고도 불립니다. 브리지, 스위치, 스위칭 허브는 다 똑같은 말
- 스위치와 브리지는 MAC주소를 이용하기 때문에 데이터링크 계층에 속함
- 스위치는 통신이 처음일 경우 MAC주소 테이블이 비어있다
    - 가장 먼저 스위치는 허브에서 전달된 데이터에서 출발지 MAC주소를 보고 MAC 주소 테이블에 저장
    - 여기서 허브는 스위치의 0번 포트에 연결되었다고 가정
    - 그러면  MAC주소 테이블에는 PC1의 MAC주소와 0번 포트가 저장
        - 해당 작업은 주소를 배웠다고 해서 Learning라고 부릅니다
    - 이제 스위치는 데이터의 목적지 MAC 주소를 보고 어느 포트로 보내야 하는지 판단해야함
    - 하지만 MAC주소 테이블을 봤더니 목적지 MAC 주소인 PC4는 등록되어 있지 않음
    - 허브와 연결된 0번 포트를 제외한 나머지 포트로 브로드캐스팅
        - 해당 작업을 Flooding이라고 함
    - 이후 PC4는 PC1으로 데이터를 응답
    - 스위치로 데이터를 보내면 스위치는 데이터의 출발지 MAC주소를 보고 Learning 함
        - 즉 PC4의 MAC주소가 몇번 포트에 연결됐는지 기록함
    - 그리고 스위치는 데이터의 목적지 MAC 주소가 MAC주소 테이블에 있는지 확인
    - PC1의 MAC 주소는 MAC 주소 테이블에 있으므로 브로드캐스팅, 즉 Flooding을 하지 않고 데이터를 0번 포트로 전송 해당 작업을 Forwarding이라고 한다
    - 이번에는 PC2가 PC1에게 데이터를 전송한다고 가정하면 PC2가 허브로 데이터를 전송하면 허브는 브로드캐스팅하여 PC1에게 데이터를 전송 PC1은 자신에게 온 데이터라는걸 확인
    - 전달받은 스위치는 PC2의 MAC주소를 보고 포트를 기록, 그런데 목적지(PC1)이 출발지(PC2)와 같은 포트(허브) 라는걸 확인
    - 이 과정에서 어디에도 데이터를 전송하지 않음 즉 포트1, 포트2에 데이터가 흘러가지 않게함 이 작업을 Filtering이라고 함
    - 이처럼 스위치는 Learning, Forwading, Flooding, Filtering해서 데이터를 전송
    - 마지막으로 일정 시간이 지나면 메모리에서 자동으로 맥주소를 제거하는 작업인 Aging이라는 작업도 있음
- 스위치는 브리지보다 더 많은 포트를 가지고 있고 ASIC라는 하드웨어로 스위칭 작업을 수행해 소프트웨어적으로 처리하는 브리지보다 속도가 더 빠름
- 스위치에는 오류를 체크하는 기능이 있지만 브리지에는 없음
- 스위치는 버퍼를 가지고 있지만 브리지는 없는 경우도 있음