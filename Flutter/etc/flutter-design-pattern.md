# ë””ìì¸íŒ¨í„´

<aside>
ğŸ’¡ í•´ë‹¹ ê°•ì˜ëŠ” ìœ íˆ¬ë²„ ê°œë°œí•˜ëŠ”ë‚¨ìì˜ [ê°•ì˜](https://www.youtube.com/watch?v=UJQRiypV6UA)ë¥¼ ë“£ê³  ë‚´ìš©ì„ ì •ë¦¬í•œ ê¸€ì´ë‹¤.

</aside>

# **ë””ìì¸ íŒ¨í„´ ê°œë°œí•˜ëŠ”ë° ê¼­ í•„ìš”í•œê°€?**

## 1. ë””ìì¸ íŒ¨í„´ì´ë€ ë¬´ì—‡ì¸ê°€

### 1. ì •ì˜

<aside>
ğŸ’¡ Dessign

- ì„¤ê³„í•˜ë‹¤, ë””ìì¸í•˜ë‹¤

Pattern

- ë˜í’€ì´ ë˜ëŠ” ì‚¬ê±´ì´ë‚˜ ë¬¼ì²´ì˜ í˜•íƒœ
</aside>

- ë°˜ë³µë˜ëŠ” ì†ŒìŠ¤ì½”ë“œ, êµ¬ì¡°ë“±ì„ ì„¤ê³„í•˜ì—¬ ì •ì˜ë‚´ë¦° ê²ƒì„ **ë””ìì¸íŒ¨í„´**ì´ë¼ í•  ìˆ˜ ìˆë‹¤
- **ë””ìì¸íŒ¨í„´**ì€ ëˆ„êµ°ê°€ê°€ ì •ì˜ë‚´ë¦° ê°œë°œë°©ì‹
- íŒ¨í„´ì´ ìƒì„±ëœ ì´ìœ ëŠ” ë°˜ë³µë˜ëŠ” ê°œë°œì—ì„œ ì¡°ê¸ˆë” ì†ì‰½ê²Œ í™•ì¥ì„± ìˆê³  ìœ ì§€ë³´ìˆ˜ê°€ ì‰½ê²Œ ë˜ê¸°ìœ„í•´

### 2. ë””ìì¸ íŒ¨í„´ì„ í•™ìŠµí•˜ê¸° ì–´ë ¤ìš´ ì´ìœ 

- ê°œê°œì¸ ë³„ ê°œë°œ ì‹¤ë ¥ì´ ë‹¤ë¥´ê¸° ë•Œë¬¸ì—
- ê°œë°œ ìŠ¤íƒ€ì¼ / ì² í•™ì´ ì¡´ì¬í•˜ê¸° ë•Œë¬¸ì—
- ë””ìì¸ íŒ¨í„´ ì—­ì‹œ ìˆ˜ì‹­ë…„ì— ê²€ì¦ëœ ê°œë°œ íŒ¨í„´ì´ë¼ í• ì§€ë¼ë„ í•´ë‹¹ ê°œë°œìì˜ ì² í•™ì´ë‚˜ ìŠ¤íƒ€ì¼ì— ìµìˆ™í•˜ì§€ ì•Šê¸° ë•Œë¬¸

### 3. ì™œ ë””ìì¸ íŒ¨í„´ì„ ë°°ì›Œì•¼í• ê¹Œ?

- ê²€ì¦ì™„ë£Œ
- ì†ŒìŠ¤ì½”ë“œ í•´ì„ / ìœ ì§€ë³´ìˆ˜
- ì‹œê°„ì ˆì•½

### 4. ì •ë¦¬

- ë””ìì¸ íŒ¨í„´ì˜ ì¥ì 
  - ê°œë°œì†ë„ê°€ ë¹¨ë¼ì§„ë‹¤.
  - ìƒˆë¡œ ì ‘í•˜ëŠ” ì†ŒìŠ¤ì½”ë“œë¼ í• ì§€ë¼ë„ ë‚´ê°€ ì•Œê³  ìˆëŠ” íŒ¨í„´ì´ë©´ êµ¬ì¡°ë¥¼ ì‰½ê²Œ íŒŒì•… ê°€ëŠ¥
  - ì´ë¯¸ ê²€ì¦ëœ ë°©ì‹ì´ë¼ ë¯¿ê³  ì‚¬ìš©ê°€ëŠ¥
  - ê°œë°œìë“¤ê°„ì˜ ì»¤ë®¤ë‹ˆì¼€ì´ì…˜ ì›í• 
- ë””ìì¸ íŒ¨í„´ì˜ ë‹¨ì 
  - í•™ìŠµ ì‹œê°„ì´ í•„ìš”í•˜ë‹¤.
  - ë¶€ì¡±í•œ ìˆ™ë ¨ë„ëŠ” ì˜¤íˆë ¤ ì¢‹ì§€ ëª»í•œ ì½”ë“œë¥¼ ì‘ì„±í•˜ê²Œ í•œë‹¤.

## 2. í”ŒëŸ¬í„°ì—ì„œ mvc íŒ¨í„´ ì–´ë–»ê²Œ ì‚¬ìš©ë ê¹Œ?

### 1. MVC ì •ì˜

- ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì€ ë³„ë„ë¡œ ë¶„ë¦¬
- í™”ë©´ê³¼ ì´ë²¤íŠ¸ ë³„ë„ ê´€ë¦¬ CASE
- MVC íŒ¨í„´ ì˜ˆì‹œ
  ![Untitled](./image/0.png)
  - í•´ë‹¹ ì´ë¯¸ì§€ëŠ” ê¸°ë³¸ì ì¸ MVC íŒ¨í„´ì˜ íë¦„ì´ë‹¤.
  - ì§„í–‰ìˆœì„œ
    1. í´ë¼ì´ì–¸íŠ¸ê°€ ì»¨íŠ¸ë¡¤ëŸ¬ì— (ë°ì´í„° ì—¬ê¸°ì„œ ë°ì´í„°ë€ JSON í˜¹ì€ HTML) ìš”ì²­ì„ í•¨
    2. ì»¨íŠ¸ë¡¤ëŸ¬ê°€ ëª¨ë¸ì—ì„œ ìš”ì²­ í•˜ëŠ” ë°ì´í„°ë¥¼ ê°€ì ¸ì˜´
       1. ì—¬ê¸°ì„œ ì»¨íŠ¸ë¡¤ëŸ¬ì—ëŠ” ì›ë˜ ë³µì¡í•œ í•¨ìˆ˜ë“¤ì´ ì¡´ì¬í•˜ì§€ë§Œ ì´ë¥¼ ë”°ë¡œ ì„œë¹„ìŠ¤ë¡œ ë¹¼ë²„ë¦¼
       2. Model ì—­ì‹œ ë§ˆì°¬ê°€ì§€ë¡œ Modelê³¼ Repositoryë¡œ ë¶„í• í•œë‹¤.
          1. **Model**: ë°ì´í„° êµ¬ì¡°ì™€ ë°ì´í„°ë² ì´ìŠ¤ í…Œì´ë¸”ì„ ë§¤í•‘í•˜ëŠ” ì—­í• ì„ í•œë‹¤. ì£¼ë¡œ ë°ì´í„°ë¥¼ í‘œí˜„í•˜ëŠ”ë° ì‚¬ìš©ë˜ë©°, ë„ë©”ì¸ ê°ì²´ë¡œì„œ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ê³¼ ê´€ë ¨ëœ ì†ì„±ê³¼ ë©”ì„œë“œë¥¼ í¬í•¨í•  ìˆ˜ ìˆë‹¤.
          2. **Reposiotry**: ë°ì´í„°ë² ì´ìŠ¤ì™€ ìƒí˜¸ì‘ìš©ì„ ë‹´ë‹¹í•˜ëŠ” ê³„ì¸µ CRUD ì‘ì—…ê³¼ ê°™ì€ ë°ì´í„° ì ‘ê·¼ ë¡œì§ì„ ì²˜ë¦¬í•œë‹¤. RepositoryëŠ” ì—”í‹°í‹° ê°ì²´ë¥¼ ë°ì´í„°ë² ì´ìŠ¤ì— ì €ì¥í•˜ê±°ë‚˜ ì—”í‹°í‹° ê°ì²´ë¥¼ ê°€ì ¸ì˜¤ëŠ” ì—­í• ì„ í•œë‹¤.
       3. ì´ë ‡ê²Œ ì‚¬ìš©í•¨ìœ¼ë¡œì„œ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì—ì„œ ë¦¬í¬ì§€í† ë¦¬ë¥¼ ì¬ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.
    3. ê°€ì ¸ì˜¨ ë°ì´í„°ë¥¼ ë·°ì— ì „ë‹¬í•¨
    4. ë·°ì—ì„œ ìš”ì²­í•œ ë°ì´í„°ë¥¼ í´ë¼ì´ì–¸íŠ¸ì— ì „ë‹¬í•´ì¤€ë‹¤.

### 2. í”ŒëŸ¬í„°ì—ì„œ ì‚¬ìš©

1. **ë…¸ë§íŒ¨í„´**

   ```tsx
   import 'package:flutter/material.dart';

   class NormalView extends StatefulWidget {
     NormalView({Key? key}) : super(key: key);

     @override
     State<NormalView> createState() => _NormalViewState();
   }

   class _NormalViewState extends State<NormalView> {
   	// ëª¨ë¸ ë‹´ë‹¹
     int count = 0;
     void update() => setState(() {});

   	// ì»¨íŠ¸ë¡¤ëŸ¬ ë‹´ë‹¹
     void incrementCounter() {
       count++;
       update();
     }

   	// ì»¨íŠ¸ë¡¤ëŸ¬ ë‹´ë‹¹
     void decrementCounter() {
       count--;
       update();
     }



   	// ë·° ë‹´ë‹¹
     @override
     Widget build(BuildContext context) {
       return Scaffold(
         appBar: AppBar(title: const Text('NO íŒ¨í„´')),
         body: Center(
           child: Column(
             mainAxisAlignment: MainAxisAlignment.center,
             children: [
               Text(count.toString(), style: TextStyle(fontSize: 150)),
               Row(
                 mainAxisAlignment: MainAxisAlignment.center,
                 children: [
                   Padding(
                     padding: const EdgeInsets.all(8.0),
                     child: ElevatedButton(
                         onPressed: incrementCounter, child: const Text('+')),
                   ),
                   Padding(
                     padding: const EdgeInsets.all(8.0),
                     child: ElevatedButton(
                         onPressed: decrementCounter, child: const Text('-')),
                   ),
                 ],
               )
             ],
           ),
         ),
       );
     }
   }
   ```

   - í•´ë‹¹ ê¸°ëŠ¥ì²˜ëŸ¼ ë³µì¡í•˜ì§€ ì•Šì„ ê²½ìš°ì—ëŠ” íŒ¨í„´ì„ ì‚¬ìš©í•˜ê¸°ë³´ë‹¨ ê°„ë‹¨í•˜ê²Œ ì œì‘í•˜ëŠ” ê²ƒ ì´ ì¢‹ë‹¤.

2. **MVC íŒ¨í„´**

   1. ì˜ˆì‹œ

      1. ëª¨ë¸

         ```tsx
         class Model {
           int _count = 0;

           int get counter => _count;
           int incrementCounter() => ++_count;
           int decrementCounter() => --_count;
         }
         ```

      2. ë·°

         ```tsx
         import 'package:dev_pattern_sample/src/mvc/controller/mvc_controller.dart';
         import 'package:flutter/material.dart';
         import 'package:mvc_pattern/mvc_pattern.dart';

         class MVCView extends StatefulWidget {
           MVCView({Key? key}) : super(key: key);

           @override
           State createState() => _MVCViewState();
         }

         class _MVCViewState extends StateMVC<MVCView> {
         	// ì»¨íŠ¸ë¡¤ëŸ¬ ìƒì„± conì´ë€ ë³€ìˆ˜ì— í• ë‹¹
           _MVCViewState() : super(MVCController()) {
             con = controller as MVCController;
           }

         	// ë³€ìˆ˜ì— í• ë‹¹
           late MVCController con;

           @override
           Widget build(BuildContext context) {
             return Scaffold(
               appBar: AppBar(title: const Text('MVC íŒ¨í„´')),
               body: Center(
                 child: Column(
                   mainAxisAlignment: MainAxisAlignment.center,
                   children: [
         	          // con ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ë°›ì•„ì„œ í™”ë©´ì— ì°ì–´ì£¼ëŠ”ì¤‘
                     Text(con.model.counter.toString(), style: TextStyle(fontSize: 150)),
                     Row(
                       mainAxisAlignment: MainAxisAlignment.center,
                       children: [
                         Padding(
                           padding: const EdgeInsets.all(8.0),
                           child: ElevatedButton(
                               onPressed: () {
                                 con.incrementCounter();
                               },
                               child: const Text('+')),
                         ),
                         Padding(
                           padding: const EdgeInsets.all(8.0),
                           child: ElevatedButton(
                               onPressed: () {
                                 con.decreamentCounter();
                               },
                               child: const Text('-')),
                         ),
                       ],
                     )
                   ],
                 ),
               ),
             );
           }
         }
         ```

      3. ì»¨íŠ¸ë¡¤ëŸ¬

         ```tsx
         import 'package:dev_pattern_sample/src/model/model.dart';
         import 'package:mvc_pattern/mvc_pattern.dart';

         // MVC ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” ControllerMVC ë¥¼ ìƒì†ë°›ìŒ
         class MVCController extends ControllerMVC {
           factory MVCController([StateMVC? state]) => _this ??= MVCController._(state);

           MVCController._(StateMVC? state)
               : model = Model(),
                 super(state);

           static MVCController? _this;
           final Model model;

           void update() => setState(() {});

           void incrementCounter() {
             model.incrementCounter();
             update();
           }

           void decreamentCounter() {
             model.decrementCounter();
             update();
           }
         }

         // ìŠ¤í…Œì´íŠ¸ ê´€ë¦¬ë¥¼ ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ í•´ì¤€ë‹¤.
         ```

      - ëª¨ë¸ì˜ ê°’ì„ ì»¨íŠ¸ë¡¤ëŸ¬ê°€ í•˜ê³  ìˆê³  í™”ë©´ ê°±ì‹ (ë·° ì—…ë°ì´íŠ¸)ë„ ì»¨íŠ¸ë¡¤ëŸ¬ê°€ í•˜ê³ ìˆë‹¤.

   2. ë‹¨ì 
      1. ì»¨íŠ¸ë¡¤ëŸ¬ê°€ ëª¨ë“  ê²ƒì„ ë‹´ë‹¹í•˜ê³  ìˆì–´ì„œ ë¡œì§ì´ ë¹„ëŒ€í•´ì§„ë‹¤.

<aside>
â“ ì•„ë‹ˆ ê·¸ëŸ°ë° ì§€ê¸ˆ ë‚´ê°€ ì´í•´ ì•ˆê°€ëŠ” ë¶€ë¶„ì€ MVCì—ì„œëŠ” ëª¨ë¸ì„ ì§ì ‘ ìˆ˜ì •í•˜ê³  ìˆë‹¤ê³  í•˜ëŠ”ë° ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ Model() ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•˜ë©´ ëª¨ë¸ì„ ì§ì ‘ ìˆ˜ì •í•˜ëŠ”ê²Œ ì•„ë‹ˆë¼ ì»¨íŠ¸ë¡¤ëŸ¬ í´ë˜ìŠ¤ì— ìƒì„±ëœ ë©¤ë²„ë³€ìˆ˜ ê°’ì„ ìˆ˜ì •í•˜ê³  ìˆëŠ”ê²Œ ì•„ë‹Œê°€? í•´ë‹¹ ë¶€ë¶„ í•´ê²°ì´ í•„ìš”í•˜ë‹¤

</aside>

## 3. í”ŒëŸ¬í„°ì—ì„œ MVVM íŒ¨í„´ ì–´ë–»ê²Œ ì‚¬ìš©ë ê¹Œ? (GextX, Provider)

### 1. ì™œ MVVM íŒ¨í„´ì´ ë‚˜ì˜¤ê²Œ ëì„ê¹Œ?

- ì„¸ìƒì— ì™„ë²½í•œ ë””ìì¸ íŒ¨í„´ì€ ì—†ë‹¤
- MVC íŒ¨í„´ì€ Viewì™€ Model ê°„ ì˜ì¡´ì„±ì´ ë„ˆë¬´ ë†’ë‹¤ëŠ” ë‹¨ì 
- ëª¨ë¸ì˜ ë³€í™”ê°€ ì¶©ë¶„íˆ ìƒê¸¸ ìˆ˜ ìˆë‹¤

### 2. ì´ì „ íŒ¨í„´ì—ì„œ ë¬´ì—‡ì´ ë³€ê²½ëì„ê¹Œ?

- ëª¨ë¸ê³¼ ì§ì ‘ì ìœ¼ë¡œ ì˜ì¡´ì„± ê´€ê³„ê°€ ìƒê¸°ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ë°ì´í„°ì™€ ê´€ë ¨ëœ ëª¨ë¸, í™”ë©´ì—ì„œ ì‚¬ìš©ë˜ëŠ” ëª¨ë¸ì„ êµ¬ë¶„í•´ì„œ ì‚¬ìš©í•œë‹¤
- MVVMì—ì„œ Modelì€ ë°ì´í„°ì™€ ê´€ë ¨ìˆëŠ” ëª¨ë¸ ViewModelëŠ” í™”ë©´ì—ì„œ ì‚¬ìš©ë˜ëŠ” ëª¨ë¸
- ë§Œì•½ ëª¨ë¸ì´ ë³€ê²½ëœë‹¤ í•˜ë”ë¼ë„ ì»¨íŠ¸ë¡¤ëŸ¬ë§Œ ìˆ˜ì •í•˜ë©´ ëœë‹¤.
  - â‡’ í•´ë‹¹ ë‚´ìš©ì€ ì¦‰ MVC íŒ¨í„´ì—ì„œëŠ” ë§Œì•½ `counter` í”„ë¡œí¼í‹°ì˜ ì´ë¦„ì„ `counter1` ë¡œ ë³€ê²½í•˜ë©´ Viewì—ì„œ `con.model.counter.toString()` ì´ë ‡ê²Œ ì“°ì´ê³  ìˆëŠ” ê°’ì„ ì „ë¶€ `con.model.counter1.toString()`ìœ¼ë¡œ ìˆ˜ì •í•´ì•¼ í•œë‹¤ í•˜ì§€ë§Œ MVVM íŒ¨í„´ì„ ì‚¬ìš©í•˜ë©´ Modelì„ ì´ìš©í•´ `int get count => _model.counter` ëª¨ë¸ì˜ í”„ë¡œí¼í‹° ê°’ì„ í•œë²ˆ ë” í• ë‹¹í•´ì£¼ê³  Viewì—ì„œëŠ” í•´ë‹¹ ê°’ì„ ì‚¬ìš©í•œë‹¤.
- MVC ì—ì„œëŠ” ì»¨íŠ¸ë¡¤ëŸ¬ê°€ í™”ë©´ ê°±ì‹  ë¡œì§ì„ ë‹´ë‹¹í–ˆìŒ â‡’ ViewModelì—ì„œëŠ” ì»¨íŠ¸ë¡¤ëŸ¬ê°€ í™”ë©´ì˜ ì—…ë°ì´íŠ¸ë¥¼ ì‹ ê²½ ì“°ì§€ ì•ŠìŒ
  - â‡’ ì‰½ê²Œ ìƒê°í•˜ì MVCì—ì„œëŠ” `update()` ë¼ëŠ” í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•´ì•¼ í–ˆì§€ë§Œ MVVM ì˜ˆë¥¼ë“¤ì–´ **GetX** ì—ì„œëŠ” `Obx`ë¥¼ í†µí•´ì„œ ì´ëŸ¬í•œ ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ ìˆë‹¤.

### 3. ìƒ˜í”Œì½”ë“œ

1. **ê¸°ë³¸**

   - ViewModel

     ```tsx
     import 'dart:async';
     import 'package:dev_pattern_sample/src/model/model.dart';

     class MvvmViewModel {
       late Model _model;
       StreamController<Model> controller = StreamController<Model>();
       Stream<Model> get mvvmStream => controller.stream;

       MvvmViewModel() {
         _model = Model();
       }

     	// ì´ countê°€ ë°”ë€Œì§€ ì•ŠëŠ”í•œ modelì—ì„œ ì•„ë¬´ë¦¬ ê°’ì´ ë³€ê²½ë˜ë„ ViewModelì—ì„œë§Œ ìˆ˜ì •í•´ì¤€ë‹¤
     	// Viewì—ì„œëŠ” ì‹ ê²½ì“¸ í•„ìš”ê°€ ì—†ë‹¤.
     	// ì´ëŸ¬í•œ ë¶€ë¶„ì´ ì˜ì¡´ì„±ì„ ë¶„ë¦¬í•œë‹¤ê³  ë³¼ ìˆ˜ ìˆë‹¤.
       int get count => _model.counter;

       void update() {
         controller.sink.add(_model);
       }

       void incrementCounter() {
         _model.incrementCounter();
         update();
       }

       void decreamentCounter() {
         _model.decrementCounter();
         update();
       }
     }
     ```

   - View

     ```tsx
     import 'package:dev_pattern_sample/src/mvvm/viewmodel/mvvm_viewmodel.dart';
     import 'package:flutter/material.dart';

     class MVVMView extends StatelessWidget {
       MVVMView({Key? key}) : super(key: key);

       MvvmViewModel viewModel = MvvmViewModel();

       @override
       Widget build(BuildContext context) {
         return Scaffold(
           appBar: AppBar(title: const Text('MVVM íŒ¨í„´')),
           body: Center(
             child: Column(
               mainAxisAlignment: MainAxisAlignment.center,
               children: [
     	          // setStateë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê³  ì»¨íŠ¸ë¡¤ëŸ¬ê°€ í™”ë©´ì„ ì œì–´í•˜ì§€ ì•Šê¸° ìœ„í•´
     	          // StreamBuilderë¥¼ ì‚¬ìš©í•œë‹¤
                 StreamBuilder(
                     stream: viewModel.mvvmStream,
                     builder: ((context, snapshot) {
                       return Text(viewModel.count.toString(),
                           style: const TextStyle(fontSize: 150));
                     })),
                 Row(
                   mainAxisAlignment: MainAxisAlignment.center,
                   children: [
                     Padding(
                       padding: const EdgeInsets.all(8.0),
                       child: ElevatedButton(
                           onPressed: () {
                             viewModel.incrementCounter();
                           },
                           child: const Text('+')),
                     ),
                     Padding(
                       padding: const EdgeInsets.all(8.0),
                       child: ElevatedButton(
                           onPressed: () {
                             viewModel.decreamentCounter();
                           },
                           child: const Text('-')),
                     ),
                   ],
                 )
               ],
             ),
           ),
         );
       }
     }
     ```

1. **Provider**

   - View

     ```tsx
     import 'package:dev_pattern_sample/src/mvvm_provider/mvvm_provider_controller.dart';
     import 'package:flutter/material.dart';
     import 'package:provider/provider.dart';

     class MVVMProviderView extends StatefulWidget {
       MVVMProviderView({Key? key}) : super(key: key);

       @override
       State<MVVMProviderView> createState() => _MVVMProviderViewState();
     }

     class _MVVMProviderViewState extends State<MVVMProviderView> {
       MVVMProviderController? controller;
       @override
       Widget build(BuildContext context) {
     	  // ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ì»¨íƒìŠ¤íŠ¸ë¡œë¶€í„° ë°›ì•„ì˜¤ë©´ì„œ
     	  // í˜„ì¬ì˜ í•´ë‹¹ ìœ„ì ¯ì€ ì°¸ì¡°(êµ¬ë…)í•˜ì§€ ì•Šê² ë‹¤ê³  ì„¤ì •í•œ ìƒíƒœ
         controller = Provider.of<MVVMProviderController>(context, listen: false);
         return Scaffold(
           appBar: AppBar(title: const Text('MVVM Provider íŒ¨í„´')),
           body: Center(
             child: Column(
               mainAxisAlignment: MainAxisAlignment.center,
               children: [
     	          // ì‹¤ì œë¡œ ì°¸ì¡°í•˜ëŠ” ë¶€ë¶„ì€ Consumerë¼ëŠ” ìœ„ì ¯ì„ ì°¸ì¡°í•œë‹¤.
     	          // ì•„ê¹Œ MVVMì˜ StreamBuilderì™€ ë™ì¼í•˜ë‹¤
                 Consumer<MVVMProviderController>(
                   builder: (_, dy, widget) {
                     return Text(
                       controller!.count.toString(),
                       style: const TextStyle(fontSize: 150),
                     );
                   },
                 ),
                 Row(
                   mainAxisAlignment: MainAxisAlignment.center,
                   children: [
                     Padding(
                       padding: const EdgeInsets.all(8.0),
                       child: ElevatedButton(
                           onPressed: () {
     	                      // ê°ê° ì»¨íŠ¸ë¡¤ëŸ¬ì˜ ì´ë²¤íŠ¸ë§Œ í˜¸ì¶œ
                             controller!.incrementCounter();
                           },
                           child: const Text('+')),
                     ),
                     Padding(
                       padding: const EdgeInsets.all(8.0),
                       child: ElevatedButton(
                           onPressed: () {
     	                      // ê°ê° ì»¨íŠ¸ë¡¤ëŸ¬ì˜ ì´ë²¤íŠ¸ë§Œ í˜¸ì¶œ
                             controller!.decreamentCounter();
                           },
                           child: const Text('-')),
                     ),
                   ],
                 )
               ],
             ),
           ),
         );
       }
     }
     ```

   - ViewModel

     ```tsx
     import 'package:dev_pattern_sample/src/model/model.dart';
     import 'package:flutter/material.dart';

     class MVVMProviderController extends ChangeNotifier {
       late Model _model;
       MVVMProviderController() {
         _model = Model();
       }

     	// ì´ ì¹œêµ¬ê°€ ViewModelì´ ë˜ëŠ”ê±°ì„
       int get count => _model.counter;

       void update() {
         notifyListeners();
       }

       void incrementCounter() {
         _model.incrementCounter();
         update();
       }

       void decreamentCounter() {
         _model.decrementCounter();
         update();
       }
     }
     ```

1. **GetX**

   - View

     ```tsx
     import 'package:dev_pattern_sample/src/mvvm_getx/mvvm_getx_controller.dart';
     import 'package:flutter/material.dart';
     import 'package:get/get_state_manager/get_state_manager.dart';

     class MVVMGetxView extends GetView<MVVMGetxController> {
       const MVVMGetxView({Key? key}) : super(key: key);

       @override
       Widget build(BuildContext context) {
         return Scaffold(
           appBar: AppBar(title: const Text('MVC íŒ¨í„´')),
           body: Center(
             child: Column(
               mainAxisAlignment: MainAxisAlignment.center,
               children: [
     	          // í•´ë‹¹ ë¶€ë¶„ì´ Consumerì™€ StreamBuilderì—­í• ì„ ë‹´ë‹¹í•œë‹¤.
                 Obx(
                   () => Text(controller.count.toString(),
                       style: TextStyle(fontSize: 150)),
                 ),
                 Row(
                   mainAxisAlignment: MainAxisAlignment.center,
                   children: [
                     Padding(
                       padding: const EdgeInsets.all(8.0),
                       child: ElevatedButton(
                           onPressed: () {
                             controller.incrementCounter();
                           },
                           child: const Text('+')),
                     ),
                     Padding(
                       padding: const EdgeInsets.all(8.0),
                       child: ElevatedButton(
                           onPressed: () {
                             controller.decreamentCounter();
                           },
                           child: const Text('-')),
                     ),
                   ],
                 )
               ],
             ),
           ),
         );
       }
     }
     ```

   - ViewModel

     ```tsx
     import 'package:dev_pattern_sample/src/model/model.dart';
     import 'package:get/get.dart';

     class MVVMGetxController extends GetxController {
       late Model model;
       RxInt count = 0.obs;

       @override
       void onInit() {
         super.onInit();
         model = Model();
       }

       void incrementCounter() {
         model.incrementCounter();
         count(model.counter);
       }

       void decreamentCounter() {
         model.decrementCounter();
         count(model.counter);
       }
     }
     ```

     - ì´ ë¶€ë¶„ì´ ì¡°ê¸ˆ í—·ê°ˆë¦´ ìˆ˜ ìˆëŠ”ë° onInití•¨ìˆ˜ì—ì„œ model ë©¤ë²„ë³€ìˆ˜ì— ì¸ìŠ¤í„´ìŠ¤ë¥¼ í• ë‹¹í•´ì¤€ë‹¤ ê·¸ë¦¬ê³  ë°”ë€ê°’ì„ countë¼ëŠ” ë³€ìˆ˜ì— ë„£ì–´ì£¼ëŠ”ê±´ë° ì›ë˜ëŠ” `count.value = model.count` ì´ë ‡ê²Œ í•˜ëŠ”ë° ë¬¸ë²•ì´ ì¡°ê¸ˆ ë‹¤ë¥¸ê±°ê°™ë‹¤.

## 4. í”ŒëŸ¬í„°ì—ì„œ MVVM íŒ¨í„´ ì‘ìš©

### í•™ìŠµëª©í‘œ

- ìœ„ì˜ ì˜ˆì œëŠ” ë„ˆë¬´ ê°„ë‹¨í•œ êµ¬ì¡°ì´ê¸° ë•Œë¬¸ì— ì‹¤ë¬´ì—ì„œ ì‚¬ìš©í•˜ëŠ” êµ¬ì¡°ì™€ëŠ” ì¡°ê¸ˆ ì°¨ì´ê°€ ë°œìƒí•  ìˆ˜ ìˆë‹¤. ê·¸ëŸ¬ë¯€ë¡œ ì‹¤ë¬´ì—ì„œ ì‚¬ìš©í•˜ëŠ” êµ¬ì¡°ë¥¼ íŒŒì•…í•´ë³´ë©´ì„œ ìƒˆë¡œìš´ ê°œë…ë“¤ì„ í•™ìŠµí•´ë³´ì

### ControllerëŠ” ì–´ë–¤ ì—­í• ì„ í•˜ëŠ”ê°€?

- Viewë¡œë¶€í„° ìš”ì²­ ë°›ì•„ Serviceë¡œ ì—°ê²°í•´ì£¼ëŠ” routeì˜ ì—­í• ì„ ë‹´ë‹¹í•œë‹¤.

### Service

- ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ë‹´ë‹¹
  - ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì´ë€ ê³ ê°ì˜ ìš”ì²­ì— ëŒ€í•œ ê²°ê³¼ë¥¼ ë„ì¶œí•˜ê¸° ìœ„í•œ ì „ë°˜ì ì¸ ê³¼ì •ì„ ëœ»í•¨

### Repository

- ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ í†µí•´ ë„ì¶œí•œ ë°ì´í„°ë¥¼ ê´€ë¦¬ í•˜ëŠ” ì—­í• 

### í”ŒëŸ¬í„°ì—ì„œëŠ”?

- Controller â‡’ route
- service â‡’ service or controller
- repository â‡’ repository

### GetX ì—ì„œëŠ”?

![Untitled](./image/1.png)

- ë¬¼ë¡  GetX ê³µì‹ë¬¸ì„œì—ì„œëŠ” MVCë‚˜ MVVMì˜ ì»¨ì…‰ì€ ì•„ë‹ˆë¼ê³  ë§í•œë‹¤.

### GetX ì†ŒìŠ¤ì½”ë“œë¥¼ ì‚´í´ë³´ì

- **View**

  ```tsx
  import 'package:flutter/material.dart';
  import 'package:flutter_getx_mvvm_sample/src/controller/home_controller.dart';
  import 'package:flutter_getx_mvvm_sample/src/model/random_user.dart';
  import 'package:flutter_getx_mvvm_sample/src/model/random_user_simple.dart';
  import 'package:get/get_state_manager/get_state_manager.dart';

  class Home extends GetView<HomeController> {
    const Home({Key? key}) : super(key: key);

    Widget _bottomBtn() {
      return Padding(
        padding: const EdgeInsets.all(8.0),
        child: ElevatedButton(
            onPressed: controller.loadSimpleUser, child: const Text('ì‚¬ìš©ì ë¡œë“œ')),
      );
    }

    Widget _userWidget(RandomUser user) {
      return Padding(
        padding: const EdgeInsets.all(8.0),
        child: Row(
          children: [
            Image.network(user.picture?.thumbnail ?? ''),
            const SizedBox(width: 10),
            Column(
              crossAxisAlignment: CrossAxisAlignment.start,
              children: [
                Text(
                  '${user.name?.first} ${user.name?.last}',
                  style: const TextStyle(fontSize: 15),
                ),
                const SizedBox(height: 5),
                Text(
                  '${user.phone}',
                  style: const TextStyle(fontSize: 9),
                ),
              ],
            ),
          ],
        ),
      );
    }

    Widget _userSimpleWidget(RandomUserSimple user) {
      return Padding(
        padding: const EdgeInsets.all(8.0),
        child: Row(
          children: [
            Image.network(user.thumbnail ?? ''),
            const SizedBox(width: 10),
            Column(
              crossAxisAlignment: CrossAxisAlignment.start,
              children: [
                Text(
                  '${user.fullname}',
                  style: const TextStyle(fontSize: 15),
                ),
                const SizedBox(height: 5),
                Text(
                  '${user.phone}',
                  style: const TextStyle(fontSize: 9),
                ),
              ],
            ),
          ],
        ),
      );
    }

    Widget _userListWidget() {
      return SingleChildScrollView(
        child: Obx(
          () => Column(
            children: List.generate(
              controller.userList.length,
              (index) => _userSimpleWidget(controller.userList[index]),
            ),
          ),
        ),
      );
    }

    @override
    Widget build(BuildContext context) {
      return Scaffold(
        appBar: AppBar(),
        body: _userListWidget(),
        bottomNavigationBar: _bottomBtn(),
      );
    }
  }
  ```

  ```tsx
    Widget _bottomBtn() {
      return Padding(
        padding: const EdgeInsets.all(8.0),
        child: ElevatedButton(
            onPressed: controller.loadSimpleUser, child: const Text('ì‚¬ìš©ì ë¡œë“œ')),
      );
    }

    // í•´ë‹¹ _buttonBtnì„ í´ë¦­í•˜ê²Œë˜ë©´ ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ì •ì˜í•´ë‘” loadSimpleUserë©”ì„œë“œë¥¼ ì‹¤í–‰í•œë‹¤.
  ```

- **Controller**

  ```tsx
  import 'package:flutter_getx_mvvm_sample/src/model/random_user.dart';
  import 'package:flutter_getx_mvvm_sample/src/model/random_user_simple.dart';
  import 'package:flutter_getx_mvvm_sample/src/repository/random_user_repository.dart';
  import 'package:get/get.dart';

  class HomeController extends GetxController {
    late RandomUserRepository _randomUserRepository;

    // RxList<RandomUser> userList = <RandomUser>[].obs;
    RxList<RandomUserSimple> userList = <RandomUserSimple>[].obs;

    @override
    void onInit() {
      super.onInit();
      _randomUserRepository = RandomUserRepository();
    }

    // void loadUser() async {
    //   var users = await _randomUserRepository.getAllUser();
    //   userList(users);
    // }

    void loadSimpleUser() async {
      var users = await _randomUserRepository.getAllUserWithSimple();
      userList(users);
    }
  }
  ```

- Repository

  ```tsx
  import 'package:flutter_getx_mvvm_sample/src/model/random_user.dart';
  import 'package:flutter_getx_mvvm_sample/src/model/random_user_simple.dart';
  import 'package:http/http.dart' as http;
  import 'dart:convert' as convert;

  class RandomUserRepository {
    static final RandomUserRepository _instance =
        RandomUserRepository._internal();
    factory RandomUserRepository() {
      return _instance;
    }
    RandomUserRepository._internal();

    Future<List<RandomUser>> getAllUser() async {
      try {
        var url = Uri.https('randomuser.me', 'api', {'results': '100'});

        var response = await http.get(url);
        if (response.statusCode == 200) {
          var jsonResponse =
              convert.jsonDecode(response.body) as Map<String, dynamic>;
          return jsonResponse['results']
              .map<RandomUser>((data) => RandomUser.fromJson(data))
              .toList();
        }
      } catch (e, stack) {
        print(stack);
        return [];
      }
      return [];
    }

    Future<List<RandomUserSimple>> getAllUserWithSimple() async {
      try {
        var url = Uri.https('randomuser.me', 'api', {'results': '100'});

        var response = await http.get(url);
        if (response.statusCode == 200) {
          var jsonResponse =
              convert.jsonDecode(response.body) as Map<String, dynamic>;
          return jsonResponse['results']
              .map<RandomUserSimple>((data) => RandomUserSimple.fromJson(data))
              .toList();
        }
      } catch (e, stack) {
        print(stack);
        return [];
      }
      return [];
    }
  }
  ```

- Model

  ```tsx
  class RandomUserSimple {
    final String? thumbnail;
    final String? fullname;
    final String? phone;

    RandomUserSimple({
      this.thumbnail,
      this.fullname,
      this.phone,
    });
    factory RandomUserSimple.fromJson(Map<String, dynamic> json) {
      var nameBuffer = StringBuffer();
      nameBuffer.writeAll([
        json["name"]['first'],
        json["name"]['last'],
      ]);
      var thumbnail = json['picture']['thumbnail'];
      return RandomUserSimple(
        fullname: nameBuffer.toString(),
        phone: json["phone"],
        thumbnail: thumbnail,
      );
    }
  }
  ```

- íë¦„
  - ì»¨íŠ¸ë¡¤ëŸ¬(ë·°ëª¨ë¸, VM)ì—ì„œ ëœë¤ìœ ì €ì‹¬í”Œ ëª¨ë¸ì„ í†µí•´ì„œ í•„ìš”í•œ ë°ì´í„°ë¥¼ ì •ì˜í•œë‹¤.
  - ì¦‰ ë·°ëª¨ë¸ì´ í™”ë©´ì—ì„œ í•„ìš”í•œ ë°ì´í„°ë¥¼ ê´€ë¦¬í•˜ëŠ”ë° ê·¸ ë°ì´í„°ëŠ” ëª¨ë¸ ì¸ìŠ¤í„´ìŠ¤ì—ì„œ ì •ì˜í–ˆë‹¤
  - ê´€ë¦¬ë˜ëŠ” ë°ì´í„°ë“¤ì´ ë³€í•˜ë©´ í™”ë©´(VIEW)ëŠ” `Obx`ë¥¼ í†µí•´ì„œ ìë™ìœ¼ë¡œ ë Œë”ë§ëœë‹¤
  - ì—¬ê¸°ì„œ ì¤‘ìš”í•œ ë¶€ë¶„ì€ MVCíŒ¨í„´ê³¼ ë‹¤ë¥´ê²Œ `RxList<RandomUserSimple> userList = <RandomUserSimple>[].obs` ë°ì´í„°ë¥¼ í†µí•´ì„œ Viewê°€ ì§ì ‘ Modelì„ ë°”ë¼ë³´ì§€ ì•Šì•„ë„ ëœë‹¤ëŠ” ì ì´ë‹¤.
  - ê·¸ë¦¬ê³  ì‹¤ì œ ë°ì´í„°ëŠ” Repositoryì—ì„œ ì§ì ‘ ë°›ì•„ì˜¤ê³  ìˆë‹¤
    - ì•„ë§ˆë„ ì´ ë¶€ë¶„ì„ Repositoryë¼ê³  ì •ì˜í–ˆì§€ë§Œ ê°œì¸ì  ìƒê°ìœ¼ë¡œëŠ” Serviceë¼ê³  í•´ë„ ë¬´ë°©í•˜ë‹¤ê³  ìƒê°í•œë‹¤.

# ê²°ë¡ 

ë§¤ë²ˆ ë””ìì¸íŒ¨í„´ì„ ê³µë¶€í•  ë•Œ ë§ˆë‹¤ ì•ˆê°œì†ì„ ê±·ëŠ” ê¸°ë¶„ì´ë“¤ì—ˆë‹¤. ê°ê°ì˜ íŒ¨í„´ë“¤ì„ ë³´ë©´ í…ìŠ¤íŠ¸ ìì²´ê°€ ì–´ë ¤ìš´ ë‚´ìš©ì€ì•„ë‹ˆë¼ ì–´ë µì§€ ì•Šì•˜ì§€ë§Œ ë‘ê°œë¥¼ ë¹„êµí•´ì„œ ë³´ë©´ **ê·¸ê²Œ ê·¸ê±°ê°™ë‹¤** ë¼ëŠ” ìƒê°ì„ ì§€ìš¸ ìˆ˜ ì—†ì—ˆë‹¤.

í•˜ì§€ë§Œ ì´ë²ˆì— Flutterë¥¼ í•™ìŠµí•˜ë©´ì„œ MVVMê³¼ MVCì—ëŒ€í•œ ë¶€ë¶„ì„ í•™ìŠµí•  ìˆ˜ ìˆëŠ” ê¸°íšŒê°€ ìƒê²¨ì„œ ë¬¸ì„œë¡œ ì‘ì„±í•´ë´¤ë‹¤. ì‚¬ì‹¤ ì½”ë“œë¡œ ë³´ë©´ ì „í˜€ ì–´ë µì§€ ì•Šë‹¤.

ê·¸ì € ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ë³€ìˆ˜í•˜ë‚˜ ìƒì„±í•˜ê³  í•´ë‹¹ ë³€ìˆ˜ëŠ” Model êµ¬ì¡°ë¥¼ ê°€ì§€ê³ ìˆë‹¤ ê·¸ë¦¬ê³  Viewë‹¨ì—ì„œ í•´ë‹¹ ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ìƒì„±ëœ ë³€ìˆ˜ë¥¼ ë°”ë¼ë³´ê³  ìˆìœ¼ë©´ MVVMì´ê³  ë§Œì•½ Modelë¡œ ìƒì„±ëœ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì§ì ‘ ë°”ë¼ë³´ê³  ìˆìœ¼ë©´ MVC íŒ¨í„´ì´ ë˜ëŠ” ê²ƒ ì´ë‹¤.

ë¬¼ë¡  ë‚´ê°€ ì‘ì„±í•œ ê²°ë¡ ì´ ê½¤ë‚˜ ë¹„ì•½ì¼ ê°€ëŠ¥ì„±ë„ ì¡´ì¬í•œë‹¤ê³  ìƒê°í•œë‹¤. í•˜ì§€ë§Œ ì‹¤ì œ ì½”ë“œë¥¼ ë³´ë©° ì‚´í´ë³´ë©´ ì°¨ì´ì ì€ í•´ë‹¹ ë¶€ë¶„ì´ ê°€ì¥ ì¤‘ìš”í•˜ë‹¤ëŠ” ë¶€ë¶„ì„ ì•Œ ìˆ˜ ìˆë‹¤.

ë””ìì¸íŒ¨í„´ì€ ì–´ë””ê¹Œì§€ë‚˜ ë°©ë²•ë¡ ì´ë‹¤. ì‹¤ì œë¡œ ì½”ë“œë¥¼ ì‘ì„±í•  ë•Œ ë‚˜ë„ ëª¨ë¥´ê²Œ íŠ¹ì •í•œ ë””ìì¸íŒ¨í„´ì— ë§ì¶”ì–´ ì‘ì—…ì„ í•˜ê³  ìˆì„ ìˆ˜ ë„ ìˆê³  ë°˜ëŒ€ë¡œ íŠ¹ì •í•œ ë””ìì¸íŒ¨í„´ëŒ€ë¡œ ì½”ë“œë¥¼ ì„¤ê³„í•˜ê³  ì‘ì„±í–ˆì§€ë§Œ ê²°ê³¼ë¬¼ì€ í•´ë‹¹ ë””ìì¸íŒ¨í„´ì—ì„œ ë§ì´ ë©€ì–´ì§ˆ ê°€ëŠ¥ì„±ë„ ìˆë‹¤.

ê·¸ëŸ¬ë¯€ë¡œ ë„ˆë¬´ ë””ìì¸íŒ¨í„´ì— ë§¤ëª°ë˜ì§€ëŠ” ì•Šë˜, ê¾¸ì¤€í•œ ê³µë¶€ë¥¼ í†µí•´ì„œ ë‚˜ì¤‘ì— í•„ìš”í•œ ë””ìì¸íŒ¨í„´ì„ ì°¸ì¡°í•  ìˆ˜ ìˆì„ ì‹¤ë ¥ì„ ê°–ì¶°ì•¼ ê² ë‹¤.
